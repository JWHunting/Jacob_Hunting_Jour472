library(tidyverse)
library(janitor)
library(sf)
readRDS(data/baltimore_homicides.rds)
read:rds(data/baltimore_homicides.rds)
read/rds(data/baltimore_homicides.rds)
homicides <- read_rds(data/baltimore_homicides.rds)
homicides <- read_rds("data/baltimore_homicides.rds")
demographics <- read_rds("data/baltimore_tract_demographics.rds")
shapefile <- read_rds("data/baltimore_tract_shapefiles.rds")
View(demographics)
View(homicides)
View(shapefile)
View(demographics)
View(homicides)
majority_white <- demographics %>%
mutate(pct_white = white_pop/total_pop) %>%
select(pct_white,geoid,name) %>%
mutate(neighborhood_type = case_when(
pct_white > .50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
View(majority_white)
majority_white <- demographics %>%
mutate(pct_white = white_pop/total_pop) %>%
select(pct_white,geoid,name) %>%
mutate(neighborhood_type = case_when(
pct_white > .50 ~ "majority_white",
TRUE ~ "not_majority_white"
)) %>%
filter(neighborhood_type == majority_white)
majority_white <- demographics %>%
mutate(pct_white = white_pop/total_pop) %>%
select(pct_white,geoid,name) %>%
mutate(neighborhood_type = case_when(
pct_white > .50 ~ "majority_white",
TRUE ~ "not_majority_white"
)) %>%
filter(neighborhood_type == "majority_white")
View(majority_white)
majority_white %>%
filter(neighborhood_type == "majority_white")
View(majority_white)
majority_white %>%
filter(neighborhood_type == "majority_white")
inner_join(shapefiles)
majority_white %>%
inner_join(shapefiles) %>%
filter(neighborhood_type == "majority_white")
majority_white <-majority_white %>%
inner_join(shapefiles) %>%
filter(neighborhood_type == "majority_white")
majority_white <-majority_white %>%
inner_join(shapefile) %>%
filter(neighborhood_type == "majority_white")
View(majority_white)
majority_white <- majority_white %>%
inner_join(homicides)
majority_white <- majority_white %>%
st_join(homicides)
majority_white <-majority_white %>%
inner_join(shapefile) %>%
filter(neighborhood_type == "majority_white") %>%
st_as_sf()
majority_white <- majority_white %>%
st_join(homicides)
majority_white <- majority_white %>%
st_join(homicides)
shootings_by_neighborhood <- homicides %>%
st_join(majority_white)
View(shootings_by_neighborhood)
homicides_by_neighborhood <- shootings_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
shooting_neighborhood <- homicides %>%
st_join(majority_white)
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
mutate(total_shootings = Closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
homicides_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
View(shooting_neighborhood)
shooting_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
homicide_by_neighborhood <- shooting_neighborhood %>%
group_by(neighborhood_type,disposition.y) %>%
count() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest)
library(tidyverse)
library(janitor)
library(sf)
balt_homicides <- read_rds("data/baltimore_homicides.rds")
balt_tract_demographics <- read_rds("data/baltimore_tract_demographics.rds")
balt_tract_shapefiles <- read_rds("data/baltimore_tract_shapefiles.rds")
ggplot() +
geom_sf(data=baltimore_tract_shapefiles) +
geom_sf(data=baltimore_homicides)
homicides <- read_rds("data/baltimore_homicides.rds")
demographics <- read_rds("data/baltimore_tract_demographics.rds")
shapefiles <- read_rds("data/baltimore_tract_shapefiles.rds")
ggplot() +
geom_sf(data=shapefiles) +
geom_sf(data=homicides)
majority_white <- demographics %>%
mutate(pct_white = white_pop/total_pop) %>%
mutate(neighborhood_type = case_when(
pct_white > .50 ~ "majority white",
TRUE ~ "non majority white"))
balt_maj_white_geo <- majority_white %>%
inner_join(shapefiles) %>%
st_as_sf() %>%
st_join(homicides) %>%
as_tibble()
View(balt_maj_white_geo)
dispos_balt_maj_white_geo <- balt_maj_white_geo %>%
group_by(neighborhood_type, disposition) %>%
count(neighborhood_type, disposition)
dispos_balt_maj_white_geo <- dispos_balt_maj_white_geo %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total*100)
View(dispos_balt_maj_white_geo)
sum(dispos_balt_maj_white_geo$closed_by_arrest) = 1002
sum(dispos_balt_maj_white_geo$closed_by_arrest)
sum(dispos_balt_maj_white_geo$closed_without_arrest)
sum(dispos_balt_maj_white_geo$open_no_arrest)
ggplot() +
geom_sf(data=pg_tract_income, aes(fill=median_household_income)) +
geom_sf(data=attendance_locations, aes(color=attend_rate_pct),size=2)
ggplot() +
geom_sf(data=baltimore_tract_shapefiles, aes(fill=dispos_balt_maj_white_geo)) +
geom_sf(data=baltimore_homicides)
ggplot() +
geom_sf(data=shapefiles, aes(fill=dispos_balt_maj_white_geo)) +
geom_sf(data=homicides)
dispos_balt_maj_white_geo %>%
st_as_sf()
